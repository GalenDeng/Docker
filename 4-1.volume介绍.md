## docker的存储技术----volume (2017.10.17)

* 提供独立于容器之外的持久化存储

 
1. * docker run -d --name  nginx -v /usr/share/nginx/html nginx
```
-v 挂载一个卷 这里的卷是： /usr/share/nginx/html
运行 nginx

result:
galen@galen-virtual:~$ docker run -d --name  nginx -v /usr/share/nginx/html nginx
293b7216a2823710a817c53a04e2615dcdea0afdf383405e5b0148fba94afc07

galen@galen-virtual:~$ docker ps
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS               NAMES
293b7216a282        nginx               "nginx -g 'daemon off"   2 minutes ago       Up 2 minutes        80/tcp              nginx
```
2. * docker inspect nginx
```
inspect : 检查的意思

可观察到：
                "Source": 
                "/var/lib/docker/volumes/658707d40957f61db6f9e042038b0c78fc4f9628736e1173f127b8a5a6a83023/_data",
                "Destination": "/usr/share/nginx/html",
*** 把虚拟机的/var/lib/docker/volumes/658707d40957f61db6f9e042038b0c78fc4f9628736e1173f127b8a5a6a83023/_data 路径挂载到容器的 /usr/share/nginx/html

```
3. `查看内容`
```
galen@galen-virtual:~$ sudo ls -lt /var/lib/docker/volumes/658707d40957f61db6f9e042038b0c78fc4f9628736e1173f127b8a5a6a83023/_data
total 8
-rw-r--r-- 1 root root 537 8月   8 23:25 50x.html
-rw-r--r-- 1 root root 612 8月   8 23:25 index.html
```
4. `进入容器中查看容器的内容`
```
* galen@galen-virtual:~$ docker exec -it nginx /bin/bash
root@293b7216a282:/# 

* root@293b7216a282:/# ls
bin   dev  home  lib64  mnt  proc  run   srv  tmp  var
boot  etc  lib   media  opt  root  sbin  sys  usr
* root@293b7216a282:/# cd /usr/bin/sh
sha1sum    sha224sum  sha256sum  sha384sum  sha512sum  shred      shuf

* root@293b7216a282:/# cd /usr/share/nginx/html/

* root@293b7216a282:/usr/share/nginx/html# ls 
50x.html  index.html

* root@293b7216a282:/usr/share/nginx/html# cat index.html 

* root@293b7216a282:~# exit
exit
```
6. `本地的目录(数据卷)挂载在容器的目录上(数据卷)` 
```
* galen@galen-virtual:~/dockerfile2$ docker run -p 80:80 -d -v $PWD/html:/usr/share/nginx/html nginx
bea1dce4fa3dc95cf61124130299ea19c79c2df60fae136b5b0affbef5b6b52d
* -v : 把本地的目录映射到容器的目录
-v $PWD/html:/usr/share/nginx/html
* $PWD ：始终指向当前目录
```
